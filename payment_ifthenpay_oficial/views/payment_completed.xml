<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="ifthenpay_iframe_post_message_template" name="ifthenpay Iframe Post Message">
        <html lang="en">
            <head>
                <meta charset="utf-8"/>
                <title data-oe-translation="1">ifthenpay Payment Status</title>
                <script type="text/javascript">
                    if (window.parent) {
                        window.parent.postMessage({
                            type: 'ifthenpay_payment_status',
                            status: '<t t-esc="payment_status"/>',
                            message: '<t t-esc="message"/>',
                        }, '*'); // Mude '*' para o domínio do seu Odoo para maior (ex: 'https://seusite.com')
                    }
                </script>
            </head>
            <body>
                <p data-oe-translation="1">Processing your payment...</p>
                <img src="/web/static/src/img/spin.png" alt="Loading" style="width: 50px; height: 50px; animation: spin 1s linear infinite;"/>
                <style>
                    @keyframes spin {
                        0% { transform: rotate(0deg); }
                        100% { transform: rotate(360deg); }
                    }
                </style>
            </body>
        </html>
    </template>

    <template id="ifthenpay_iframe_error_template" name="ifthenpay Iframe Error">
        <html lang="en">
            <head>
                <meta charset="utf-8"/>
                <title data-oe-translation="1">ifthenpay Error</title>
            </head>
            <body>
                <p><t t-esc="title"/></p>
                <p><t t-esc="message"/></p>
            </body>
        </html>
    </template>

    <template id="ifthenpay_iframe_redirect_template" name="ifthenpay Loading">
        <html lang="en">
            <head>
                <meta charset="utf-8"/>
                <title data-oe-translation="1">Aguardando Confirmação...</title>
                <style>
                    body {
                        margin: 0;
                        padding: 0;
                        font-family: Arial, sans-serif;
                    }
                    #ifthenpay_loading_modal {
                        position: absolute;
                        width: 100%;
                        height: 100%;
                        top: 0;
                        left: 0;
                        z-index: 10;
                        background-color: rgba(255, 255, 255, 0.9);
                        display: flex;
                        flex-direction: column;
                        justify-content: center;
                        align-items: center;
                    }
                    #ifthenpay_loading_modal .spinner-border {
                        margin-bottom: 10px;
                        width: 50px;
                        height: 50px;
                        border: 5px solid #007bff;
                        border-right-color: transparent;
                        border-radius: 50%;
                        animation: spin-animation 1s linear infinite;
                    }
                    @keyframes spin-animation {
                        0% { transform: rotate(0deg); }
                        100% { transform: rotate(360deg); }
                    }
                </style>
            </head>
            <body>
                <div id="ifthenpay_loading_modal">
                    <div class="spinner-border text-primary" role="status">
                        <span class="visually-hidden"></span>
                    </div>
                    <p data-oe-translation="1"></p>
                </div>
            </body>
        </html>

        <script type="text/javascript">
            document.addEventListener('DOMContentLoaded', function() {
                var params = <t t-raw="json.dumps(params)"/>;
                window.parent.postMessage({
                    type: 'ifthenpay_loading_ready',
                    params: params
                }, '*');
            });
        </script>
    </template>
</odoo>